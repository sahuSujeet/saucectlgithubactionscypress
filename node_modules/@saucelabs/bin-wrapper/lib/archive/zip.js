"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.unpackZip = exports.isZip = void 0;
const adm_zip_1 = __importDefault(require("adm-zip"));
function isZip(b) {
    if (!b || b.byteLength < 3) {
        return false;
    }
    return (b[0] === 0x50 &&
        b[1] === 0x4b &&
        (b[2] === 0x03 || b[2] === 0x05 || b[2] === 0x07) &&
        (b[3] === 0x04 || b[3] === 0x06 || b[3] === 0x08));
}
exports.isZip = isZip;
async function unpackZip(buf) {
    const zip = new adm_zip_1.default(buf);
    return zip.getEntries().map((x) => ({
        data: x.getData(),
        path: x.entryName,
    }));
}
exports.unpackZip = unpackZip;
exports.default = { isZip, unpackZip };
